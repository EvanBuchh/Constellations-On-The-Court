<div class="sheet-preload">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-0.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-1.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-2.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-3.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-4.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-5.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clockheal-6.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-0.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-1.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-2.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-3.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-4.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-5.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-6.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-7.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock8-8.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock4-0.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock4-1.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock4-2.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock4-3.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock4-4.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-0.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-1.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-2.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-3.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-4.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-5.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock6-6.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-0.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-1.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-2.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-3.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-4.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-5.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-6.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-7.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-8.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-9.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-10.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-11.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/clocks/clock12-12.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/bg-fortune.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/bg-action.png">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/bg-resist.png?raw=true">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/bg-vice.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/crew.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/fortune.png">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Declare.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Empathize.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Forgive.png?raw=true">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/crew.png">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Set.png?raw=true">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/fortune.png">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Spike.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Focus.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Serve.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Judge.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Block.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Hustle.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Realization.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Tenacity.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Passion.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Recieve.png?raw=true">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Dig.png?raw=true">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/skulk.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/study.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/sway.png">
	<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/vice.png">
	<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/bg-action.png?raw=true">
</div>

<input type="checkbox" name="attr_setting_flexwidth" class="sheet-hidden sheet-flexwidth" value="1">
<div class="sheet-container">
<div class="sheet-topholder sheet-flex-center">
	<div>
		<input type="checkbox" name="attr_sheet_type" class="sheet-hidden sheet-3waybox" value="faction"/><input type="radio" name="attr_sheet_type" class="sheet-type-selector sheet-3waybox" value="character" checked/><input type="radio" name="attr_sheet_type" class="sheet-type-selector sheet-3waybox" value="ship"/><input type="radio" name="attr_sheet_type" class="sheet-type-selector sheet-3waybox" value="faction"/><span class="sheet-type-selector"></span>
	</div>
	<div class="sheet-settings-checkbox-holder"><input type="checkbox" name="attr_show_settings" class="sheet-settings-checkbox" value="1"/><span>y</span></div>
</div>

<input type="hidden" name="attr_sheet_type" class="sheet-type-input" value="character"/>
<input type="checkbox" name="attr_show_settings" class="sheet-hidden sheet-hidediv" value="1"/>
<div class="sheet-settings sheet-flex-wrap">
	<div class="sheet-col100 sheet-setting-character">
		<select name="attr_generate_source_character" title="Choose source">
			<option value="libero" selected>Libero</option>
			<option value="middleblocker">Middle Blocker</option>
			<option value="opposite">Opposite</option>
			<option value="outside">Outside</option>
			<option value="setter">Setter</option>
		</select>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_ability"/><span>Add abilities</span></label>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_friend"/><span>Add friends/contacts</span></label>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_playbookitem"/><span>Add items</span></label>
	</div>
	<div class="sheet-col100 sheet-setting-ship">
		<select name="attr_generate_source_ship" title="Choose source">
			<option value="fire" selected>Fire</option>
			<option value="water">Water</option>
			<option value="air">Air</option>
			<option value="earth">Earth</option>

		</select>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_crewability"/><span>Add abilities</span></label>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_contact"/><span>Add contacts</span></label>
		<label class="sheet-generatebutton"><input type="checkbox" name="attr_generate_upgrade"/><span>Add upgrades</span></label>
	</div>
	<div class="sheet-col100 sheet-setting-character">
		<select name="attr_setting_extra_stress">
			<option value="0" selected>9</option>
			<option value="1">10</option>
			<option value="2">11</option>
			<option value="3">12</option>
		</select>
		<span>Number of stress boxes</span></div>
	<div class="sheet-col50 sheet-setting-character"><input type="checkbox" name="attr_setting_extra_trauma" value="1" class="sheet-checkbox"/><span></span><span>Show an extra trauma box</span></div>
	<div class="sheet-col50 sheet-setting-character sheet-setting-ship"><input type="checkbox" name="attr_setting_extra_xp" value="1" class="sheet-checkbox"/><span></span><span>Show an extra xp condition</span></div>
	<div class="sheet-col100 sheet-setting-character"><input type="checkbox" class="sheet-checkbox" name="attr_setting_showitem_0" value="1"/><span></span><span>Show special item with optional second box</span></div>
	<div class="sheet-col100 sheet-setting-character"><input type="checkbox" class="sheet-checkbox" name="attr_setting_specialarmor2" value="1"/><span></span><span>Show another special armor checkbox</span></div>
	<div class="sheet-col100 sheet-settings-load sheet-setting-character">
		<span>Resistance bonus:</span>
		<input type="number" name="attr_resbonus_realization" value="0"> <span>Realization</span>
		<input type="number" name="attr_resbonus_tenacity" value="0"> <span>Tenacity</span>
		<input type="number" name="attr_resbonus_passion" value="0"> <span>Resolve</span>
	</div>
	<div class="sheet-col100 sheet-setting-character">
		<input type="checkbox" name="attr_setting_consequence_query" class="sheet-checkbox" value="1"><span></span><span>Query for consequence name when resisting</span>
	</div>
	<div class="sheet-col50 sheet-setting-ship"><input type="number" name="attr_defaultgambit" value="2"/><span>number of Starting Gambits</span></div>
	<div class="sheet-col50 sheet-setting-character"><input type="text" spellcheck="false" name="attr_setting_stress_label" value="stress"/><span>Label to use for Stress</span></div>
	<div class="sheet-col50 sheet-setting-character"><input type="text" spellcheck="false" name="attr_setting_trauma_label" value="trauma"/><span>Label to use for Trauma</span></div>
	<div class="sheet-settings-load sheet-col100 sheet-setting-character">
		<span>Load: </span>
		<input type="number" name="attr_setting_load_l" value="3"/> <span>light</span>
		<input type="number" name="attr_setting_load_n" value="5"/> <span>normal</span>
		<input type="number" name="attr_setting_load_h" value="6"/> <span>heavy</span>
	</div>
	<div class="sheet-col100 sheet-setting-character sheet-setting-ship sheet-setting-faction">
		<input type="checkbox" name="attr_setting_flexwidth" class="sheet-checkbox" value="1"><span></span><span>Flexible sheet width (adapts to container)</span>
	</div>
	<div class="sheet-col100 sheet-version-text sheet-setting-character sheet-setting-ship sheet-setting-faction"><span>Oserveinal by Tim Denee &amp; Jakob Oesinghaus </span></div>
	<input type="hidden" name="attr_bonusdice" value="?{Bonus dice|0|1|2|3|4|5|6|-1|-2|-3}">
	<input type="hidden" name="attr_consequence_query" value="a consequence">
</div>

<!-- CHARACTER SHEET START-->
<div class="sheet-tab sheet-type-character">
	<div class="sheet-col55 sheet-flex-layout">
		<div class="sheet-col55 sheet-scumlogo"></div>
	</div>
	<div class="sheet-playbook sheet-flex-layout">
		<input type="text" spellcheck="false" name="attr_playbook" class="sheet-playbook-title sheet-label" placeholder="playbook"/>
		<textarea spellcheck="false" name="attr_playbook_description" class="sheet-playbook-desc sheet-label" placeholder="A short playbook description"></textarea>
		<input type="checkbox" name="attr_show_playbook_reminder" class="sheet-hidden sheet-hidediv" value="1" checked>
	</div>
	<div class="sheet-col35">
		<div class="sheet-flex sheet-header">
			<div class="sheet-col50">
				<input type="text" spellcheck="false" name="attr_highschool"/>
				<div class="sheet-text sheet-label sheet-title">Highschool</div>
			</div>
			<div class="sheet-col50">
				<input type="text" spellcheck="false" name="attr_team"/>
				<div class="sheet-text sheet-label sheet-title">Team</div>
			</div>
			<div class="sheet-col50">
				<input type="text" spellcheck="false" name="attr_name"/>
				<div class="sheet-text sheet-label sheet-title">Name</div>
            </div>
            <div class="sheet-col50 sheet-header">
                <input type="text" spellcheck="false" name="attr_nickname"/>
                    <div class="sheet-text sheet-label sheet-title">Nickname</div>
            </div>
            <div class="sheet-col50">
				<input type="text" spellcheck="false" name="attr_look_off"/>
				<div class="sheet-text sheet-label sheet-title">Look off the court</div>
            </div>
            <div class="sheet-col50 sheet-header">
                <input type="text" spellcheck="false" name="attr_look_on"/>
                    <div class="sheet-text sheet-label sheet-title">Look on the court</div>
            </div>
			<div class="sheet-col50">
				<div class="sheet-auto-expand">
					<span name="attr_heritage"></span>
					<textarea spellcheck="false" name="attr_heritage"></textarea>
				</div>
				<input type="hidden" name="attr_heritage" value="">
				<div class="sheet-text sheet-label">
					<span class="sheet-title">Why you chose this school</span>
					<span class="sheet-info"></span>
				</div>
			</div>
			<div class="sheet-col50">
				<div class="sheet-auto-expand">
					<span name="attr_background"></span>
					<textarea spellcheck="false" name="attr_background"></textarea>
				</div>
				<input type="hidden" name="attr_background" value="">
				<div class="sheet-text sheet-label">
					<span class="sheet-title">Role</span>
					<span class="sheet-info"></span>
				</div>
			</div>
			<div class="sheet-col100 sheet-flex-wrap">
				<div class="sheet-auto-expand">
					<span name="attr_vice_purveyor"></span>
					<textarea spellcheck="false" name="attr_vice_purveyor"></textarea>
				</div>
				<input type="hidden" name="attr_vice_purveyor" value="">
				<div class="sheet-text sheet-label">
					<span class="sheet-title">Struggle</span>
					<span class="sheet-info">Family — Academics — Social Life — Health — Mental Health — Money — Identity</span>
				</div>
			</div>
		</div>
		<div class="sheet-stress sheet-flex-layout">
			<div class="sheet-blackheader sheet-stress1">
				<div class="sheet-label">
					<span name="attr_setting_stress_label"></span>
				</div>
			</div>
            <!-- STRESS DON'T SPACE OUT -->
			<div class="sheet-blackheader sheet-stress3 ">
                <span></span>
				<input type="radio" value="0" name="attr_stress" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="4" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="5" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="6" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="7" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="0" checked/><input type="radio" value="10" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="1"/><input type="radio" value="11" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="2"/><input type="radio" value="12" name="attr_stress" class="sheet-tooth sheet-xptooth"/><span></span>
			</div>
			<div class="sheet-blackheader sheet-stress1">
					<div class="sheet-label">
						<span name="attr_setting_trauma_label"></span>
					</div>
				</div>
				<!-- STRESS DON'T SPACE OUT -->
				<div class="sheet-blackheader sheet-stress3 ">
					<span></span>
					<input type="radio" value="0" name="attr_trauma" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_trauma" class="sheet-tooth sheet-regulartooth"/><span></span>
				</div>
		</div>
		<div class="sheet-flex-layout sheet-def-margin">
			<!-- HARM -->
			<div class="sheet-col100 sheet-harm">
				<div class="sheet-blackheader sheet-label">Mental Obstacles</div>
				<div class="sheet-harmbody">
					<div class="sheet-number sheet-flex-centerall">3</div>
					<textarea spellcheck="false" class="sheet-2cols" name="attr_harm3"></textarea>
					<div class="sheet-label sheet-flex-centerall">Need Help</div>
					<div class="sheet-number sheet-flex-centerall">2</div>
					<textarea spellcheck="false" name="attr_harm2_1"></textarea>
					<textarea spellcheck="false" name="attr_harm2_2"></textarea>
					<div class="sheet-label sheet-flex-centerall">-1D</div>
					<div class="sheet-number sheet-flex-centerall">1</div>
					<textarea spellcheck="false" name="attr_harm1_1"></textarea>
					<textarea spellcheck="false" name="attr_harm1_2"></textarea>
					<div class="sheet-label sheet-flex-centerall">Less Effect</div>
				</div>
				<!-- RECOVERY -->
				<div class="sheet-recovery">
					<span class="sheet-bold sheet-label">Recovery</span> <span>When you recover in downtime, clear all <strong>level 1 harm</strong> and advance your <strong>healing clock</strong> ►</span><br/>
					<div class="sheet-clockprogress sheet-recoveryclock">
						<span class="sheet-bold sheet-label">Progress</span>
						<input type="radio" name="attr_recovery" class="sheet-text-input" value="0" checked/><span>0</span>
						<input type="radio" name="attr_recovery" class="sheet-text-input" value="1"/><span>1</span>
						<input type="radio" name="attr_recovery" class="sheet-text-input" value="2"/><span>2</span>
						<input type="radio" name="attr_recovery" class="sheet-text-input" value="3"/><span>3</span>
						<input type="radio" name="attr_recovery" class="sheet-text-input sheet-last" value="4"/><span>4</span>
						<div class="sheet-clockpicture"></div>
					</div>
				</div>
				<div class="sheet-flex-layout">
						<!-- Burnout Recovery -->
						<div class="sheet-col50a sheet-teamwork">
							<div class="sheet-plainheader sheet-label">Burnout</div>
							<div class="sheet-teamworkbox"><span name="attr_burnout_description"></span></div>
						</div>
						<div class="sheet-col55 sheet-teamwork">
								<div class="sheet-plainheader sheet-label">Recovering From Burnout</div>
								<div class="sheet-teamworkbox"><span name="attr_burnout_recovery"></span></div>
							</div>
						<!-- Player Principles -->
					</div>
			</div>
		</div>
	</div>
	<div class="sheet-col65 sheet-flex-wrap">
		<div class="sheet-header sheet-col60">

            <!-- SPECIAL ABILITIES -->
					<!-- XP DO NOT SPACE -->
					<div class="sheet-col100 sheet-stress sheet-flex sheet-blackheader">
						<div class = "sheet-label">Playbook XP</div>
						<div class="sheet-stress3 ">
					<input type="radio" value="0" name="attr_playbook_xp" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="4" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="5" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="6" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="7" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="8" name="attr_playbook_xp" class="sheet-tooth sheet-xptooth"/><span></span>
				</div>
			</div>
		<div class="sheet-def-margin">
			<div class="sheet-specialheader sheet-label">Special Abilities</div>
			<fieldset class="repeating_ability">
				<div class="sheet-specialability sheet-flex-layout sheet-rep-block">
					<input type="checkbox" name="attr_check" value="1" class="sheet-triangle"/><span></span>
					<div class="sheet-auto-expand sheet-abilityname">
						<span name="attr_name"></span>
						<textarea spellcheck="false" name="attr_name" placeholder="Ability Name"></textarea>
					</div>
					<div class="sheet-auto-expand sheet-abilitydesc">
						<span name="attr_description"></span>
						<textarea spellcheck="false" name="attr_description" placeholder="Ability description"></textarea>
					</div>
				</div>
			</fieldset>
		</div>
		<!-- ADVANCEMENT -->
		<div class="sheet-advancement">
			<!-- XP TRIGGERS -->
			<ul class="sheet-advancement-desc">
				<li>Every time you roll a desperate action, mark xp in that action's attribute.</li>
				<li>Every time you fill your recovery clock mark improvement in the special ability track</li>
				<li class="sheet-nondot">At the end of each session, for each item below, mark 1 xp (in your playbook or an attribute) or 2 xp if that item occurred multiple times.</li>
				<li><span  name="attr_xp_condition">Enter your playbook's specific way to mark XP here.</span></li>
				<li>Express your beliefs, drives, role, or sign?</li>
				<li>Suffer from issues from your struggle?</li>
				<li>Brought into play your Burnout or aid someone in Burnout?</li>

			</ul>
		</div>
		</div>
		<!-- Attributes columns -->
		<div class="sheet-col40">
				<div class="sheet-col100 sheet-flex sheet-blackheader sheet-stress">
						<div class = "sheet-label">Grade</div>
						<div class="sheet-stress3 ">
						<input type="radio" value="0" name="attr_grade" class="sheet-tooth sheet-zero" checked="checked"/><span></span><input type="radio" value="1" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="0" checked/><input type="radio" value="10" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="1"/><input type="radio" value="11" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="2"/><input type="radio" value="12" name="attr_grade" class="sheet-tooth sheet-xptooth"/><span></span>
						</div>
				</div>
				<div class="sheet-col100"><span></span></div>
			<!-- Realization -->
			<div class="sheet-def-margin">
			<div class="sheet-attribute">
				<div class="sheet-attribute-title sheet-flex">
					<button class="sheet-rollbutton sheet-attributebutton" type="roll" name="roll_Realization" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=resists @{consequence_query} with}} {{title-realization=1}} {{roll1=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{roll10=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-9}]],1}kl1]]d6]]}} {{roll11=[[[[{[[@{realization}+@{resbonus_realization}+@{bonusdice}-10}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-(@{realization}+@{resbonus_realization})-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-(@{realization}+@{resbonus_realization})-@{bonusdice}]],1}kl1]]d6]]}}">Realization
					</button>
					<input type="hidden" name="attr_realization" value="0"/>
					<input type="hidden" name="attr_realization_xp_max" value="6"/>
					<div class="sheet-attribute-xp-box"><input class="sheet-tooth sheet-zero" type="radio" name="attr_realization_xp" value="0" checked="checked"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="1"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="2"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="3"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="4"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="5"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_realization_xp" value="6"/><span></span>
					</div>
				</div>
				<div class="sheet-actions sheet-col100">
					<!-- Set -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_set" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_set" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_set" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_set" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Set" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-set=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{set}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{set}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{set}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{set}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{set}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{set}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{set}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{set}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{set}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{set}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{set}-@{bonusdice}]],1}kl1]]d6]]}}">Set
						</button>
					</div>
					<!-- Spike -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_spike" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_spike" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_spike" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_spike" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="attr_roll_Spike" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-spike=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}">
							<div class="sheet-label">
								<input type="text" placeholder="Spike" class="sheet-specialactionbutton" name="attr_special_spike"/>
							</div>
						</button>
					</div>
					<!-- Serve -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_serve" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_serve" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_serve" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_serve" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="attr_roll_Serve" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-serve=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{serve}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{serve}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{serve}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{serve}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{serve}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{serve}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{serve}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{serve}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{serve}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{serve}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{serve}-@{bonusdice}]],1}kl1]]d6]]}}">
							<div class="sheet-label">
								<input type="text" placeholder="Serve" class="sheet-specialactionbutton" name="attr_special_serve"/>
							</div>
						</button>
					</div>
				</div>
			</div>
		</div>
			<!-- Tenacity -->
			<div class="sheet-attribute">
				<div class="sheet-attribute-title sheet-flex">
					<button class="sheet-rollbutton sheet-attributebutton" type="roll" name="roll_Tenacity" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=resists @{consequence_query} with}} {{title-tenacity=1}} {{roll1=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{roll10=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-9}]],1}kl1]]d6]]}} {{roll11=[[[[{[[@{tenacity}+@{resbonus_tenacity}+@{bonusdice}-10}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-(@{tenacity}+@{resbonus_tenacity})-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-(@{tenacity}+@{resbonus_tenacity})-@{bonusdice}]],1}kl1]]d6]]}}">Tenacity
					</button>
					<input type="hidden" name="attr_tenacity" value="0"/>
					<input type="hidden" name="attr_tenacity_xp_max" value="6"/>
					<div class="sheet-attribute-xp-box"><input class="sheet-tooth sheet-zero" type="radio" name="attr_tenacity_xp" value="0" checked="checked"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="1"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="2"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="3"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="4"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="5"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_tenacity_xp" value="6"/><span></span>
					</div>
				</div>
				<div class="sheet-actions sheet-col100">
					<!-- Block -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_block" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_block" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_block" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_block" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="attr_roll_Block" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-block=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{block}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{block}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{block}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{block}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{block}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{block}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{block}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{block}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{block}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{block}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{block}-@{bonusdice}]],1}kl1]]d6]]}}">
							<div class="sheet-label">
								<input type="text" placeholder="hustle" class="sheet-specialactionbutton" name="attr_special_block"/>
							</div>
						</button>
					</div>
					<!-- Recieve -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_recieve" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_recieve" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_recieve" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_recieve" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Recieve" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-recieve=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{recieve}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{recieve}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{recieve}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{recieve}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{recieve}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{recieve}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{recieve}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{recieve}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{recieve}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{recieve}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{recieve}-@{bonusdice}]],1}kl1]]d6]]}}">Recieve
						</button>
					</div>
					<!-- Dig -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_dig" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_dig" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_dig" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_dig" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Dig" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-dig=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{dig}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{dig}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{dig}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{dig}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{dig}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{dig}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{dig}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{dig}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{dig}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{dig}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{dig}-@{bonusdice}]],1}kl1]]d6]]}}">Dig
						</button>
					</div>
				</div>
			</div>
			<!-- Resolve -->
			<div class="sheet-attribute">
				<div class="sheet-attribute-title sheet-flex">
					<button class="sheet-rollbutton sheet-attributebutton" type="roll" name="roll_Resolve" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=resists @{consequence_query} with}} {{title-passion=1}} {{roll1=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{roll10=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-9}]],1}kl1]]d6]]}} {{roll11=[[[[{[[@{passion}+@{resbonus_passion}+@{bonusdice}-10}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-(@{passion}+@{resbonus_passion})-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-(@{passion}+@{resbonus_passion})-@{bonusdice}]],1}kl1]]d6]]}}">Passion
					</button>
					<input type="hidden" name="attr_passion" value="0"/>
					<input type="hidden" name="attr_passion_xp_max" value="6"/>
					<div class="sheet-attribute-xp-box"><input class="sheet-tooth sheet-zero" type="radio" name="attr_passion_xp" value="0" checked="checked"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="1"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="2"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="3"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="4"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="5"/><span></span><input class="sheet-tooth sheet-xptooth" type="radio" name="attr_passion_xp" value="6"/><span></span>
					</div>
				</div>
				<div class="sheet-actions sheet-col100">
					<!-- Declare -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_declare" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_declare" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_declare" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_declare" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Declare" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-declare=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{declare}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{declare}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{declare}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{declare}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{declare}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{declare}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{declare}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{declare}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{declare}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{declare}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{declare}-@{bonusdice}]],1}kl1]]d6]]}}">Declare
						</button>
					</div>
					<!-- Empathize -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_empathize" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_empathize" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_empathize" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_empathize" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Empathize" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-empathize=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{empathize}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{empathize}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{empathize}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{empathize}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{empathize}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{empathize}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{empathize}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{empathize}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{empathize}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{empathize}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{empathize}-@{bonusdice}]],1}kl1]]d6]]}}">Empathize
						</button>
					</div>
					<!-- Forgive -->
					<div class="sheet-action sheet-flex">
						<input class="sheet-hidden sheet-fakeradio" type="checkbox" name="attr_forgive" value="0" checked="checked"/>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_forgive" value="1"/><span></span>
						<div class="sheet-divider"></div>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_forgive" value="2"/><span></span>
						<input class="sheet-triangle sheet-fakeradio" type="checkbox" name="attr_forgive" value="3"/><span></span>
						<button class="sheet-rollbutton sheet-actionbutton" type="roll" name="roll_Forgive" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-forgive=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{forgive}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{forgive}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{forgive}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{forgive}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{forgive}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{forgive}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{forgive}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{forgive}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{forgive}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{forgive}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{forgive}-@{bonusdice}]],1}kl1]]d6]]}}">Forgive
						</button>
					</div>
				</div>
			</div>

			<!-- BONUS DICE -->
			<div class="sheet-bonusdie">
				<div class="sheet-label">Bonus Dice</div>
				<div class="sheet-flex">
					<div class="sheet-bonusdieplus sheet-flex-centerall">+</div>
					<div class="sheet-bonusdietext">
						<div class="sheet-smallcaps">Push yourself</div>
						<div>(take 2 <span name="attr_setting_stress_label"></span></div>
					</div>
				</div>
				<div class="sheet-flex">
					<div class="sheet-bonusdieplus sheet-flex-centerall">+</div>
					<div class="sheet-bonusdietext">
						<span class="sheet-smallcaps">Ignite the opposition</span>
					</div>
				</div>
			</div>

			<!-- FRIENDS -->
			<div class="sheet-friends">
				<input type="text" spellcheck="false" class="sheet-specialheader sheet-label" value="Friends and Rivals"/>
				<fieldset class="repeating_friend">
					<div class="sheet-friend sheet-flex-center sheet-rep-block">
						<input type="checkbox" name="attr_status" class="sheet-triangle sheet-friendup" value="up"/><span></span><input type="checkbox" class="sheet-triangle sheet-frienddown" name="attr_status" value="down"/><span></span><div class="sheet-auto-expand"><span name="attr_name"></span><textarea spellcheck="false" name="attr_name"placeholder="Friend name"></textarea></div>
					</div>
				</fieldset>
			</div>
			<div class="sheet-col100 sheet-gatherinfo">
					<div class="sheet-plainheader sheet-label">Player Principles</div>
					<ul>
						<li><span>Put it all on the table</span></li>
						<li><span>Think Cinematically</span></li>
						<li><span>Share the characters</span></li>
						<li><span>Be a fan of the characters</span></li>
						<li><span>Make the characters lives interesting</span></li>
						<li><span>Subvert tropes</span></li>
						<li><span>There is no canon</span></li>
						<li><span>Use metaphors to explain reality</span></li>
	
					</ul>
				</div>
			<button type="roll" name="roll_Fortune" class="sheet-fortunebutton" value='&{template:bitd} {{charname=@{character_name}}} {{fortune=1}} {{subtitle=rolls}} {{title-fortune=1}} {{roll1=[[[[{?{Number of dice|0|1|2|3|4|5|6},1}kl1]]d6]]}} {{roll2=[[[[{[[?{Number of dice}]]-1,1}kl1]]d6]]}} {{roll3=[[[[{[[?{Number of dice}-2]],1}kl1]]d6]]}} {{roll4=[[[[{[[?{Number of dice}-3]],1}kl1]]d6]]}} {{roll5=[[[[{[[?{Number of dice}-4]],1}kl1]]d6]]}} {{roll6=[[[[{[[?{Number of dice}-5]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-(?{Number of dice})]],1}kl1]]d6]], [[[[{[[1-(?{Number of dice})]],1}kl1]]d6]]}} {{notes=?{Notes}}}'>Roll Fortune</button>
		</div>
		<div class="sheet-col97 sheet-clocks sheet-def-margin">
			<div class="sheet-specialheader sheet-label">Clocks</div>
			<fieldset class="repeating_clock">
				<div class="sheet-clock"><input type="text" spellcheck="false" placeholder="Clock Name" name="attr_name" class="sheet-label"/><div class="sheet-clockprogress"><span>Size</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="4" checked/><span>4-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="6"/><span>6-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="8"/><span>8-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-last sheet-longoption" value="12"/><span>12-segment</span><div class="sheet-4clock"><span>Progress</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock1" class="sheet-text-input sheet-last" value="4"/><span>4</span><div class="sheet-clockpicture"></div></div><div class="sheet-6clock"><span>Progress</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock2" class="sheet-text-input sheet-last" value="6"/><span>6</span><div class="sheet-clockpicture"></div></div><div class="sheet-8clock"><span>Progress</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="6"/><span>6</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="7"/><span>7</span><input type="radio" name="attr_clock3" class="sheet-text-input sheet-last" value="8"/><span>8</span><div class="sheet-clockpicture"></div></div><div class="sheet-12clock"><span>Progress</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="6"/><span>6</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="7"/><span>7</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="8"/><span>8</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="9"/><span>9</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="10"/><span>10</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="11"/><span>11</span><input type="radio" name="attr_clock4" class="sheet-text-input sheet-last" value="12"/><span>12</span><div class="sheet-clockpicture"></div></div></div>
				</div>
			</fieldset>
		</div>
		<textarea spellcheck="false" class="sheet-notes" name="attr_notes" placeholder="Notes"></textarea>
	</div>
</div>

<!-- SHIP SHEET -->
<div class="sheet-tab sheet-type-faction">
	<div class="sheet-col30 sheet-scumlogo"></div>
	<div class="sheet-playbook sheet-flex">
		<input type="text" spellcheck="false" class="sheet-playbook-title sheet-label" name="attr_crew_type" placeholder="Team"/>
		<textarea spellcheck="false" name="attr_crew_description" class="sheet-playbook-desc sheet-label" placeholder="Team Description"></textarea>
		<input type="checkbox" name="attr_show_playbook_reminder" class="sheet-hidden sheet-hidediv" value="1" checked>
	</div>
	<div class="sheet-col55">
		<div class="sheet-header sheet-flex-wrap">
			<div class="sheet-col55">
				<input type="text" spellcheck="false" name="attr_ship_location"/>
				<div class="sheet-text sheet-label sheet-title">Location</div>
			</div>
			<div class="sheet-col45">
				<input type="text" spellcheck="false" name="attr_school_name"/>
				<div class="sheet-text sheet-label sheet-title">Highschool Name</div>
			</div>
			<div class="sheet-col55">
					<input type="text" spellcheck="false" name="attr_school_type"/>
					<div class="sheet-text sheet-label sheet-title">School Type</div>
				</div>
				<div class="sheet-col45">
					<input type="text" spellcheck="false" name="attr_school_reputation"/>
					<div class="sheet-text sheet-label sheet-title">School Reputation</div>
				</div>
			<div class="sheet-col100">
				<input type="text" spellcheck="false" name="attr_school_colors"/>
				<div class="sheet-text sheet-label sheet-title">School Colors and Symbol</div>
			</div>
		</div>
		<div class="sheet-def-margin sheet-ship">
			<!-- SHIP SYSTEMS -->
			<div class="sheet-ship-systemrow sheet-flex-layout">
				<!-- SYSTEM 1 -->
				<div class="sheet-ship-system sheet-col50">
					<div class="sheet-blackheader sheet-flex">
						<input type="text" spellcheck="false" name="attr_system1_desc" class="sheet-label" placeholder="Advisor Name"/>
					</div>
					<div class="sheet-modulelist sheet-col100">
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys1_mod_1_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys1_mod_1_desc" value="Tutoring"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys1_mod_2_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys1_mod_2_desc" value="Cheer Band"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys1_mod_3_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys1_mod_3_desc" value="Budget"/>
						</div>
					</div>
				</div>
				<!-- EXPOSITION COIN AND DEBT -->

				<!-- SYSTEM 2 -->
				<div class="sheet-ship-system sheet-col50">
					<div class="sheet-blackheader sheet-flex">
						<input type="text" spellcheck="false" name="attr_system2_desc" class="sheet-label" placeholder="Manager Name"/>
					</div>
					<div class="sheet-modulelist sheet-col100">
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys2_mod_1_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys2_mod_1_desc" value="First Aid"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys2_mod_2_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys2_mod_2_desc" value="Cooking"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys2_mod_3_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys2_mod_3_desc" value="Stats"/>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-ship-bottomrow sheet-flex-layout">
				<!-- SYSTEM 3 -->
				<div class="sheet-ship-system sheet-col50">
					<div class="sheet-blackheader sheet-flex">
						<input type="text" spellcheck="false" name="attr_system3_desc" class="sheet-label" placeholder="coach name"/>
					</div>
					<div class="sheet-modulelist sheet-col100">
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys3_mod_1_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys3_mod_1_desc" value="Inspire"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys3_mod_2_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys3_mod_2_desc" value="Tactics"/>
						</div>
						<div class="sheet-item">
							<input type="checkbox" name="attr_sys3_mod_3_check" value="1" class="sheet-checkbox"/><span></span>
							<input type="text" spellcheck="false" class="sheet-itemname"  name="attr_sys3_mod_3_desc" value="Identity"/>
						</div>
					</div>
				</div>
				<div class="sheet-ship-expo-cred sheet-col50">
						<div class="sheet-ship-cred">
							<div class="sheet-crewcred">
								<div class="sheet-blackheader sheet-label">Cohesion</div>
								<div class="sheet-debt sheet-flex-center">
									<input type="radio" value="0" name="attr_cohesion" class="sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_cohesion" class="sheet-radiobox"/><span></span><input type="radio" value="2" name="attr_cohesion" class="sheet-radiobox"/><span></span><input type="radio" value="3" name="attr_cohesion" class="sheet-radiobox"/><span></span><input type="radio" value="4" name="attr_cohesion" class="sheet-radiobox"/><span></span><input type="radio" value="5" name="attr_cohesion" class="sheet-radiobox "/><span></span><input type="radio" value="6" name="attr_cohesion" class="sheet-radiobox "/><span></span><input type="radio" value="7" name="attr_cohesion" class="sheet-radiobox "/><span></span><input type="radio" value="8" name="attr_cohesion" class="sheet-radiobox "/><span></span><input type="radio" value="9" name="attr_cohesion" class="sheet-radiobox "/><span></span>
								</div>
							</div>
							<div class="sheet-crewcred">
									<div class="sheet-blackheader sheet-label">Resentment</div>
									<div class="sheet-debt sheet-flex-center">
										<input type="radio" value="0" name="attr_resentment" class="sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_resentment" class="sheet-radiobox"/><span></span><input type="radio" value="2" name="attr_resentment" class="sheet-radiobox"/><span></span><input type="radio" value="3" name="attr_resentment" class="sheet-radiobox"/><span></span><input type="radio" value="4" name="attr_resentment" class="sheet-radiobox"/><span></span><input type="radio" value="5" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="6" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="7" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="8" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="9" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="10" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="11" name="attr_resentment" class="sheet-radiobox "/><span></span><input type="radio" value="12" name="attr_resentment" class="sheet-radiobox "/><span></span>
									</div>
									<div class="sheet-debt sheet-flex-center">
											<input type="radio" value="0" name="attr_resentment1" class="sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_resentment1" class="sheet-radiobox"/><span></span><input type="radio" value="2" name="attr_resentment1" class="sheet-radiobox"/><span></span><input type="radio" value="3" name="attr_resentment1" class="sheet-radiobox"/><span></span><input type="radio" value="4" name="attr_resentment1" class="sheet-radiobox"/><span></span><input type="radio" value="5" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="6" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="7" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="8" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="9" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="10" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="11" name="attr_resentment1" class="sheet-radiobox "/><span></span><input type="radio" value="12" name="attr_resentment1" class="sheet-radiobox "/><span></span>
									</div>
									<div class="sheet-debt sheet-flex-center">
												<input type="radio" value="0" name="attr_resentment2" class="sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_resentment2" class="sheet-radiobox"/><span></span><input type="radio" value="2" name="attr_resentment2" class="sheet-radiobox"/><span></span><input type="radio" value="3" name="attr_resentment2" class="sheet-radiobox"/><span></span><input type="radio" value="4" name="attr_resentment2" class="sheet-radiobox"/><span></span><input type="radio" value="5" name="attr_resentment2" class="sheet-radiobox "/><span></span><input type="radio" value="6" name="attr_resentment2" class="sheet-radiobox "/><span></span>
									</div>
								</div>
						</div>
					</div>
				</div>
			<!-- END SHIP SYSTEMS -->
		</div>
		<div class="sheet-def-margin">
			<div class="sheet-col97 sheet-clocks">
				<div class="sheet-specialheader sheet-label">Clocks</div>
				<fieldset class="repeating_crewclock">
					<div class="sheet-clock"><input type="text" spellcheck="false" placeholder="Clock Name" name="attr_name" class="sheet-label"/><div class="sheet-clockprogress"><span>Size</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="4" checked/><span>4-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="6"/><span>6-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-longoption" value="8"/><span>8-segment</span><input type="radio" name="attr_size" class="sheet-text-input sheet-last sheet-longoption" value="12"/><span>12-segment</span><div class="sheet-4clock"><span>Progress</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock1" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock1" class="sheet-text-input sheet-last" value="4"/><span>4</span><div class="sheet-clockpicture"></div></div><div class="sheet-6clock"><span>Progress</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock2" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock2" class="sheet-text-input sheet-last" value="6"/><span>6</span><div class="sheet-clockpicture"></div></div><div class="sheet-8clock"><span>Progress</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="6"/><span>6</span><input type="radio" name="attr_clock3" class="sheet-text-input" value="7"/><span>7</span><input type="radio" name="attr_clock3" class="sheet-text-input sheet-last" value="8"/><span>8</span><div class="sheet-clockpicture"></div></div><div class="sheet-12clock"><span>Progress</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="0" checked/><span>0</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="1"/><span>1</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="2"/><span>2</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="3"/><span>3</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="4"/><span>4</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="5"/><span>5</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="6"/><span>6</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="7"/><span>7</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="8"/><span>8</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="9"/><span>9</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="10"/><span>10</span><input type="radio" name="attr_clock4" class="sheet-text-input" value="11"/><span>11</span><input type="radio" name="attr_clock4" class="sheet-text-input sheet-last" value="12"/><span>12</span><div class="sheet-clockpicture"></div></div></div>
					</div>
				</fieldset>
			</div>
		</div>
		<div class="sheet-col100 sheet-flex">
			<div class="sheet-col40">
				<div class="sheet-label sheet-blackheader">Team Name</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-label sheet-blackheader">W/L</div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-label sheet-blackheader">Relationship</div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Aries</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team1"></span><textarea spellcheck="false" name="attr_team1"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr1"></span><textarea spellcheck="false" name="attr_teamr1"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Taurus</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team2"></span><textarea spellcheck="false" name="attr_team2"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr2"></span><textarea spellcheck="false" name="attr_teamr2"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Gemini</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team3"></span><textarea spellcheck="false" name="attr_team3"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr3"></span><textarea spellcheck="false" name="attr_teamr3"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Cancer</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team4"></span><textarea spellcheck="false" name="attr_team4"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr4"></span><textarea spellcheck="false" name="attr_teamr4"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Leo</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team5"></span><textarea spellcheck="false" name="attr_team5"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr5"></span><textarea spellcheck="false" name="attr_teamr5"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Virgo</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team6"></span><textarea spellcheck="false" name="attr_team6"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr6"></span><textarea spellcheck="false" name="attr_teamr6"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Libra</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team7"></span><textarea spellcheck="false" name="attr_team7"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr7"></span><textarea spellcheck="false" name="attr_teamr7"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Scorpio</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team8"></span><textarea spellcheck="false" name="attr_team8"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr8"></span><textarea spellcheck="false" name="attr_teamr8"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Sagittarius</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team9"></span><textarea spellcheck="false" name="attr_team9"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr9"></span><textarea spellcheck="false" name="attr_teamr9"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Capricorn</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team10"></span><textarea spellcheck="false" name="attr_team10"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr10"></span><textarea spellcheck="false" name="attr_teamr10"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Aquarius</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team11"></span><textarea spellcheck="false" name="attr_team11"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr11"></span><textarea spellcheck="false" name="attr_teamr11"></textarea></div>
			</div>
	</div>
	<div class="sheet-col100 sheet-flex sheet-header">
			<div class="sheet-col40">
				<div class="sheet-label">Pisces</div>
				</div>
			<div class="sheet-col18">
					<div class="sheet-auto-expand"><span name="attr_team12"></span><textarea spellcheck="false" name="attr_team12"></textarea></div>
			</div>
			<div class="sheet-col40">
					<div class="sheet-auto-expand"><span name="attr_teamr12"></span><textarea spellcheck="false" name="attr_teamr12"></textarea></div>
			</div>
	</div>
	
		<textarea spellcheck="false" class="sheet-notes" name="attr_notes" placeholder="Notes"></textarea>
	</div>
	<div class="sheet-col45 sheet-flex-wrap">
		<!-- SHIP ABILITIES -->
		<div class= "sheet-col100 sheet-flex">
				<div class= "sheet-col30 sheet-header sheet-flex">
					<div class="sheet-col50a">
							<input type="text" spellcheck="false" name="attr_fall_qual"/>
							<div class="sheet-text sheet-label sheet-title">Fall</div>
					</div>
					<div class="sheet-col50b">
							<input type="text" spellcheck="false" name="attr_Spring_qual"/>
							<div class="sheet-text sheet-label sheet-title">Spring Qualifier</div>
					</div>
					</div>
				<div class= "sheet-col30 sheet-header">
						<input type="text" spellcheck="false" name="attr_Szodiac_open"/>
						<div class="sheet-text sheet-label sheet-title">Zodiac Open</div>
				</div>
				<div class= "sheet-col30 sheet-header">
						<input type="text" spellcheck="false" name="attr_const_cup"/>
						<div class="sheet-text sheet-label sheet-title">Constelation Cup</div>
				</div>
		</div>
		<div class= "sheet-col100 sheet-header sheet-flex">
				<div class= "sheet-col50a">
					<input type="text" spellcheck="false" name="attr_team_rep"/>
					<div class="sheet-text sheet-label sheet-title">Team Reputation</div>
				</div>
				<div class= "sheet-col50b sheet-flex">
							<div class = "sheet-label sheet-blackheader">Tier</div>
							<div class="sheet-stress2 ">
							<input type="radio" value="0" name="attr_team_tier" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="0" checked/><input type="radio" value="10" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="1"/><input type="radio" value="11" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="checkbox" name="attr_setting_extra_stress" class="sheet-hidden sheet-extra-stress" value="2"/><input type="radio" value="12" name="attr_team_tier" class="sheet-tooth sheet-xptooth"/><span></span>
							</div>
					</div>
		</div>
		<div class="sheet-crewabilities sheet-col100">

			<div class="sheet-specialheader sheet-label">Special Abilities</div>
			<fieldset class="repeating_crewability">
				<div class="sheet-specialability sheet-flex-layout sheet-rep-block">
					<input type="checkbox" name="attr_check" value="1" class="sheet-triangle"/><span></span>
					<div class="sheet-auto-expand sheet-abilityname">
						<span name="attr_name"></span>
						<textarea spellcheck="false" name="attr_name" placeholder="Ability Name"></textarea>
					</div>
					<div class="sheet-auto-expand sheet-abilitydesc">
						<span name="attr_description"></span>
						<textarea spellcheck="false" name="attr_description"  placeholder="Ability description"></textarea>
					</div>
				</div>
			</fieldset>
			<div class="sheet-label sheet-blackheader">Lineup</div>
			<div class="sheet-contact sheet-flex-center sheet-rep-block">
					<div class="sheet-auto-expand"><span name="attr_pos4"></span><textarea spellcheck="false" name="attr_pos4" placeholder="Opposite"></textarea></div>
					<div class="sheet-auto-expand"><span name="attr_pos3"></span><textarea spellcheck="false" name="attr_pos3" placeholder="Middle Blocker"></textarea></div>
					<div class="sheet-auto-expand"><span name="attr_pos2"></span><textarea spellcheck="false" name="attr_pos2" placeholder="Outside"></textarea></div>
				</div>
				<div class="sheet-contact sheet-flex-center sheet-rep-block">
						<div class="sheet-auto-expand"><span name="attr_pos5"></span><textarea spellcheck="false" name="attr_pos5" placeholder="Outside"></textarea></div>
						<div class="sheet-auto-expand"><span name="attr_pos6"></span><textarea spellcheck="false" name="attr_pos6" placeholder="Libero/MB"></textarea></div>
						<div class="sheet-auto-expand"><span name="attr_pos1"></span><textarea spellcheck="false" name="attr_pos1" placeholder="Setter"></textarea></div>
					</div>
		</div>
		<div class="sheet-col100">
			<div class="sheet-contacts">
				<div class="sheet-specialheader sheet-label">The Immortalized</div>
				<fieldset class="repeating_contact">
					<div class="sheet-contact sheet-flex-center sheet-rep-block">
						<input type="checkbox" name="attr_check" value="1" class="sheet-triangle"/><span></span>
						<div class="sheet-auto-expand"><span name="attr_immortal_name"></span><textarea spellcheck="false" name="attr_immortal_name" placeholder="Name"></textarea></div>
						<div class="sheet-auto-expand"><span name="attr_immortal_position"></span><textarea spellcheck="false" name="attr_immortal_position" placeholder="Position"></textarea></div>
						<div class="sheet-auto-expand"><span name="attr_immortal_mark"></span><textarea spellcheck="false" name="attr_immortal_mark" placeholder="Mark"></textarea></div>
					</div>
				</fieldset>
			</div>
			<button type="roll" name="roll_Fortune" class="sheet-fortunebutton" value='&{template:bitd} {{charname=@{character_name}}} {{fortune=1}} {{subtitle=rolls}} {{title-fortune=1}} {{roll1=[[[[{?{Number of dice|0|1|2|3|4|5|6},1}kl1]]d6]]}} {{roll2=[[[[{[[?{Number of dice}]]-1,1}kl1]]d6]]}} {{roll3=[[[[{[[?{Number of dice}-2]],1}kl1]]d6]]}} {{roll4=[[[[{[[?{Number of dice}-3]],1}kl1]]d6]]}} {{roll5=[[[[{[[?{Number of dice}-4]],1}kl1]]d6]]}} {{roll6=[[[[{[[?{Number of dice}-5]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-(?{Number of dice})]],1}kl1]]d6]], [[[[{[[1-(?{Number of dice})]],1}kl1]]d6]]}} {{notes=?{Notes}}}'>Roll Fortune</button>
		</div>
		<div class="sheet-advancement">
			<div class="sheet-advancement-header sheet-flex sheet-blackheader">
				<div class="sheet-label">Mark XP:</div>
				<div class="sheet-label">Playbook Advancement</div>
				<div class="sheet-advancement-xpholder">
					<input type="radio" value="0" name="attr_crew_xp" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="4" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="5" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="6" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="7" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="8" name="attr_crew_xp" class="sheet-tooth sheet-xptooth"/><span></span>
				</div>
			</div>
			<ul class="sheet-advancement-desc">
				<li class="sheet-nondot">At the end of every session, answer the following questions to facilate a review and debrief of the session. Fill in the track above for each question you answered yes to.</li>
				<li><input type="text" spellcheck="false" placeholder="Enter your crew's specific way to mark XP here." name="attr_crew_xp_condition"/></li><input type="checkbox" name="attr_setting_extra_xp" value="1" class="sheet-hidden sheet-xp-hider"/>
				<li>Contend with challenges above your current station.</li>
				<li>Did you bolster your repuation or bolster a new one?</li>
				<li>Express the Team's beliefs, drives, sign, and background?</li>
			</ul>
		</div>
	</div>
</div>

<!-- SYSTEMS / FACTIONS -->
<div class="sheet-tab sheet-type-ship">
	<!-- SYSTEMS -->
	<div class=sheet-col50>
		<div class="sheet-factiontitle">
			<input class="sheet-label" type="text" name="attr_legacy_title" value="Legacy of ________"/>
		</div>

		<div class="sheet-col50">
				<div class="sheet-blackheader sheet-label">Legacy Track</div>
				<input type="radio" value="0" name="attr_legacy_xp" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="4" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="5" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="6" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="7" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="8" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="9" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="10" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="11" name="attr_legacy_xp" class="sheet-tooth sheet-xptooth"/><span></span>
		</div>
		<div class="sheet-col50">
			<div class="sheet-blackheader sheet-label">Tier</div>
			<input type="radio" value="0" name="attr_legacy_tier" class="sheet-tooth sheet-zero" checked/><span></span><input type="radio" value="1" name="attr_legacy_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="2" name="attr_legacy_tier" class="sheet-tooth sheet-xptooth"/><span></span><input type="radio" value="3" name="attr_legacy_tier" class="sheet-tooth sheet-xptooth"/><span></span>		
		</div>
		</div>
		<div class="sheet-col50">
				<div class="sheet-blackheader sheet-label">Legacy Rules</div>
				<div class="sheet-legacy-rules"><span>After a Match in a tournament the Red will award Legacy to the team. Go around the table using your legacy points to fill in boxes with teammates who these players have just impacted in this session. Legacy points must be spent. Every box you fill also fills in a dot on the legacy track. After all the dots are filled erase them and fill in a tier. You start at tier 0.</span></div>
			</div>
<div class="sheet-col100 sheet-flex" >
	<div class="sheet-col50 sheet-header" name="1point-legacy-box">
		<input class="sheet-label centered-text" type="text" name="attr_legacy_actions1" value="1 Point Legacy Actions"/>
		<div class="sheet-blackheader sheet-label">Additional Drill Downtime Action</div>
		<fieldset class="repeating_contact1">
		<div class="sheet-contact sheet-flex-center sheet-rep-block">
				<div class="sheet-auto-expand"><span name="attr_drill_name"></span><textarea spellcheck="false" name="attr_immortal_name1" placeholder="Name"></textarea></div>
				<div class="sheet-auto-expand"><span name="attr_drill_position"></span><textarea spellcheck="false" name="attr_immortal_position1" placeholder="What about this person makes you train harder."></textarea></div>
			</div>
		</fieldset>
		<div class="sheet-blackheader sheet-label">Additional Recovery Downtime Action</div>
		<fieldset class="repeating_contact2">
		<div class="sheet-contact sheet-flex-center sheet-rep-block">
				<div class="sheet-auto-expand"><span name="attr_rec_name"></span><textarea spellcheck="false" name="attr_immortal_name2" placeholder="Name"></textarea></div>
				<div class="sheet-auto-expand"><span name="attr_rec_position"></span><textarea spellcheck="false" name="attr_immortal_position2" placeholder="How this person has inspired you to overcome."></textarea></div>
			</div>
		</fieldset>
		<div class="sheet-blackheader sheet-label">+1 Cohesion</div>
		<fieldset class="repeating_contact3">
		<div class="sheet-contact sheet-flex-center sheet-rep-block">
				<div class="sheet-auto-expand"><span name="attr_co_name"></span><textarea spellcheck="false" name="attr_immortal_name3" placeholder="Name"></textarea></div>
				<div class="sheet-auto-expand"><span name="attr_co_position"></span><textarea spellcheck="false" name="attr_immortal_position3" placeholder="How much ytou enjoy playing with this person."></textarea></div>
			</div>
		</fieldset>

	</div>
	<div class="sheet-col50a sheet-header" name="3point-legacy-box">
			<input class="sheet-label centered-text" type="text" name="attr_legacy_actions2" value="3 Point Legacy Actions"/>
			<div class="sheet-blackheader sheet-label">Additional Cammaraderie Downtime Action</div>
			<fieldset class="repeating_contact4">
			<div class="sheet-contact sheet-flex-center sheet-rep-block">
					<div class="sheet-auto-expand"><span name="attr_cam_name"></span><textarea spellcheck="false" name="attr_immortal_name4" placeholder="Name"></textarea></div>
					<div class="sheet-auto-expand"><span name="attr_cam_position"></span><textarea spellcheck="false" name="attr_immortal_position4" placeholder="Why does this person make you proud to be on the team."></textarea></div>
				</div>
			</fieldset>
			<div class="sheet-blackheader sheet-label">Roll your highest resist during struggle phase.</div>
			<fieldset class="repeating_contact5">
			<div class="sheet-contact sheet-flex-center sheet-rep-block">
					<div class="sheet-auto-expand"><span name="attr_res_name"></span><textarea spellcheck="false" name="attr_immortal_name5" placeholder="Name"></textarea></div>
					<div class="sheet-auto-expand"><span name="attr_res_position"></span><textarea spellcheck="false" name="attr_immortal_position5" placeholder="How this person helped you with your struggle"></textarea></div>
				</div>
			</fieldset>
			<div class="sheet-blackheader sheet-label">Create a 1st year to join the team next year.</div>
			<fieldset class="repeating_contact6">
			<div class="sheet-contact sheet-flex-center sheet-rep-block">
					<div class="sheet-auto-expand"><span name="attr_ko_name"></span><textarea spellcheck="false" name="attr_immortal_name6" placeholder="Name"></textarea></div>
					<div class="sheet-auto-expand"><span name="attr_ko_position"></span><textarea spellcheck="false" name="attr_immortal_position6" placeholder="Someone impressed by this person to join the team."></textarea></div>
				</div>
			</fieldset>
	</div>
</div>
</div>
</div>

<rolltemplate class="sheet-rolltemplate-bitd">
<div class="sheet-roll-holder{{#action}} sheet-roll-action{{/action}}{{#resist}} sheet-roll-resist{{/resist}}{{#vice}} sheet-roll-vice{{/vice}}{{#fortune}} sheet-roll-fortune{{/fortune}}{{#short}} sheet-roll-short{{/short}}">
	<div class="sheet-roll-name">{{charname}}</div>
	<div class="sheet-roll-subtitle">{{subtitle}}</div>
	<div class="sheet-roll-title">
		{{#rolltypeimage}}[{{rolltypetext}}]({{rolltypeimage}}){{/rolltypeimage}}
		{{#title-declare}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Declare.png?raw=true">{{/title-declare}}
		{{#title-empathize}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Empathize.png?raw=true">{{/title-empathize}}
		{{#title-forgive}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Forgive.png?raw=true">{{/title-forgive}}
		{{#title-crew}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/crew.png">{{/title-crew}}
		{{#title-set}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Set.png?raw=true">{{/title-set}}
		{{#title-fortune}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/fortune.png">{{/title-fortune}}
		{{#title-spike}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Spike.png?raw=true">{{/title-spike}}
		{{#title-focus}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Focus.png?raw=true">{{/title-focus}}
		{{#title-serve}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Serve.png?raw=true">{{/title-serve}}
		{{#title-judge}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Judge.png?raw=true">{{/title-judge}}
		{{#title-block}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Block.png?raw=true">{{/title-block}}
		{{#title-hustle}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Hustle.png?raw=true">{{/title-hustle}}
		{{#title-realization}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Realization.png?raw=true">{{/title-realization}}
		{{#title-tenacity}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Tenacity.png?raw=true">{{/title-tenacity}}
		{{#title-passion}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Passion.png?raw=true">{{/title-passion}}
		{{#title-recieve}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Recieve.png?raw=true">{{/title-recieve}}
		{{#title-dig}}<img src="https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Haiku/assets/Dig.png?raw=true">{{/title-dig}}
		{{#title-skulk}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/skulk.png">{{/title-skulk}}
		{{#title-study}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/study.png">{{/title-study}}
		{{#title-sway}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/sway.png">{{/title-sway}}
		{{#title-vice}}<img src="https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Scum%20-%20Villainy/Assets/rolltemplate/vice.png">{{/title-vice}}
	</div>
	<div class="sheet-roll-dice">
		{{#rollGreater() roll1 0}}{{roll1}}<span class="sheet-comma">,</span>{{/rollGreater() roll1 0}}
		{{#rollGreater() roll2 0}}{{roll2}}<span class="sheet-comma">,</span>{{/rollGreater() roll2 0}}
		{{#rollGreater() roll3 0}}{{roll3}}<span class="sheet-comma">,</span>{{/rollGreater() roll3 0}}
		{{#rollGreater() roll4 0}}{{roll4}}<span class="sheet-comma">,</span>{{/rollGreater() roll4 0}}
		{{#rollGreater() roll5 0}}{{roll5}}<span class="sheet-comma">,</span>{{/rollGreater() roll5 0}}
		{{#rollGreater() roll6 0}}{{roll6}}<span class="sheet-comma">,</span>{{/rollGreater() roll6 0}}
		{{#rollGreater() roll7 0}}{{roll7}}<span class="sheet-comma">,</span>{{/rollGreater() roll7 0}}
		{{#rollGreater() roll8 0}}{{roll8}}<span class="sheet-comma">,</span>{{/rollGreater() roll8 0}}
		{{#rollGreater() roll9 0}}{{roll9}}<span class="sheet-comma">,</span>{{/rollGreater() roll9 0}}
		{{#rollGreater() roll10 0}}{{roll10}}<span class="sheet-comma">,</span>{{/rollGreater() roll10 0}}
		{{#rollGreater() roll11 0}}{{roll11}}{{/rollGreater() roll11 0}}
		<!-- Legacy bonus dice -->
		{{#rollGreater() bonusdice 0}}{{bonus1}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 0}}{{#rollGreater() bonusdice 1}}{{bonus2}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 1}}{{#rollGreater() bonusdice 2}}{{bonus3}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 2}}{{#rollGreater() bonusdice 3}}{{bonus4}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 3}}{{#rollGreater() bonusdice 4}}{{bonus5}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 4}}{{#rollGreater() bonusdice 5}}{{bonus6}}<span class="sheet-comma">, </span>{{/rollGreater() bonusdice 5}}
		<!-- End legacy section -->
		{{#rollGreater() zerodice 0}}
			<div class="sheet-zerodice1">{{zerodice}}</div>
			<div class="sheet-zerodice2">Zero Dice — take the lowest result above</div>
		{{/rollGreater() zerodice 0}}
	</div>
	{{#position}}<div class="sheet-roll-position">{{position}}</div>{{/position}}{{#effect}}<div class="sheet-roll-effect">{{effect}}</div>{{/effect}}{{#resist}}{{^short}}<div class="sheet-roll-instructions">Suffer <em>6 stress minus the highest die result.</em> When you roll a critical on resistance, clear 1 stress.</div>{{/short}}{{/resist}}{{#vice}}{{^short}}
	<div class="sheet-roll-instructions"><em>Clear an amount of stress equal to the highest die result.</em> If the result of your vice roll means you clear more stress levels than you had marked, you <em>overindulge</em>.</div>
	{{/short}}{{/vice}}{{#notes}}
	<div class="sheet-roll-notes">{{notes}}</div>{{/notes}}
</div>
</rolltemplate>

<!-- SHEET WORKERS -->
<script type="text/worker">
	/* Data */
	var libro_mod = 0;
	const shipData = {
			fire: {
				base: {
					crew_description: 'Flamboyant, Aggressive, Honest, Comedic',
					crew_xp_condition: 'When times were tough did you make sure they remember you?'
				},
				crewability: [
					{
						name: 'Super Hot Fire',
						description: 'Each player may add +1 Action rating to Spike, Dig, or Declare.(Up to a max of 3)'
					},
					{
						name: 'And the crowd goes wild',
						description: 'Whenever you Crit choose one: The entire team gains Potency for the next rally, each player ticks a segament on their recovery clock, or all players earn 1 Legacy.'
					},
					{
						name: 'This is our time',
						description: 'In the finals, gain +1D to resistance rolls.'
					},
					{
						name: 'You will know our names',
						description: 'When you win a tournamenr, your team gains quadruple Legacy from Trophies'
					},
					{
						name: 'Return the favor',
						description: 'When playing against a team that knocked gain +1 cohesion for each rival on the team'
					},
					{
						name: 'Star Player',
						description: 'Choose a character on the team. Set up actions increase both the position and effect for that character. "How does their fame manifest?" "How do they embrace it?"'
					},
					{
						name: 'Overdrive',
						description: ':Everyone on the team may push themselves all at once, if so everyone on the team has Potency for this set'
					}
				]
			},
			water: {
				base: {
					crew_description: 'Adaptable, Caring, Blaming, Insecure, Emotional',
					crew_xp_condition: 'When times were tough did you support each other?'
				},
				crewability: [
					{
						name: 'Quasi Aquam',
						description: ':Each Player may add +1 Action Raing to Empatize, Forgive, or Serve (up to a max of 3)'
					},
					{
						name: 'The Crashing Wave',
						description: ':Set up actions may grant +1 die instead of position or effect.'
					},
					{
						name: 'All in this together',
						description: 'When taking the Camaraderie downtime action, you get +1D.'
					},
					{
						name: 'We are not winning for only us',
						description: 'At the start of a Match gain 1 Cohesion each friend eliminated by the opposing team.'
					},
					{
						name: 'Quenched',
						description: 'You do not take +2 Resentment from characters burning out during sets'
					},
					{
						name: 'Release the River',
						description: ':When you comfort someone who is crying you may remove all Stress on their sheet and put it on yours.'
					},
					{
						name: 'Keep moving foward',
						description: ':Teamwork actions with people you just reconciled with gain +1D'
					}
				]

			},
			air: {
				base: {
					crew_description: 'Curious, Independent, Indecisive, Social, Chatterbox',
					crew_xp_condition: 'When times were tough did you commnicate effectively?'
				},
				crewability: [
					{
						name: 'Sicut Ventus',
						description: ' Each Player may add +1 Action Raing to Declare, Receive, or Set (up to a max of 3).'
					},
					{
						name: 'Synchroized',
						description: 'When you perform a Group Action, you may multiple 6s from different rolls as a critical success.'
					},
					{
						name: 'Almost telepathic',
						description: 'Your team signals are unreadable. Gain a point of Cohesion whenever you trick an opponent.'
					},
					{
						name: 'No wasted breath',
						description: 'You may spend Cohesion to resist consequences of miscommuncation and deception.'
					},
					{
						name: 'Constantly Curious',
						description: 'Long Term Projects involing tactics on the court gain +1D. You have +1D to gather information on rolls when studying other teams.'
					},
					{
						name: 'Talk it out',
						description: 'When characters have a disagrement they gain +1D to Forigve actions'
					},
					{
						name: 'Keep moving foward',
						description: 'Teamwork actions with people you just reconciled with gain +1D'
					}
				]

			},

			earth: {
				base: {
					crew_description: 'Reliable, Stubborn, Loyal, Workaholic, Consistent',
					crew_xp_condition: 'When times were tough did you stick to the plan?'
				},
				crewability: [
					{
						name: 'Always Ready',
						description: 'Flashbacks about planning to win the Match cost -1 Stress'
					},
					{
						name: 'We prepared for this',
						description: 'Send a point of Cohesion to resist a consequence that would tick a clock.'
					},
					{
						name: 'Its all coming together',
						description: 'You may distribute 2 free ticks to longterm projects every downtime. When you fill a 6 clock or that you started in a Match, gain a point of Cohesion'
					},
					{
						name: 'Terra Firmas',
						description: 'Each player may add +1 action to Set, Block,and Empathize.(Up to a max of 3)'
					},
					{
						name: 'Not the time, not the place',
						description: 'Roll twice for After Match, and take the event you want.'
					},
					{
						name: 'Deep Roots',
						description: 'You may take teamwork actions with characters who have graduated who are Immortalized when desperate "How are they still with you?"'
					},
					{
						name: 'Always a flaw',
						description: 'When executing a plan to exploit a flaw in flaw in your opponents strategy get +1D to Teamwork actions.'
					}
				]

			}
		},
		playbookData = {
			libro: {
				ability: [
					{
						name: 'Rolling Thunder',
						description: 'Push yourself to do one of the following: tumble and roll to keep the ball in play or impress someone.'
					},
					{
						name: 'Bring it!',
						description: 'You get +1D when you Ignite The Opposition when facing off against someone who is spiking'
					},
					{
						name: 'Fired up',
						description: 'When playing against a friend in your next match you gain +1 Improvement from Drills.'
					},
					{
						name: 'Iron Will',
						description: 'Opponents cannot not intimidated you. When you make resistance rolls with Tenacity gain +1D.'
					},
					{
						name: 'We are better than this',
						description: 'When communicating your disappointment to the team you gain Potency. You get +1D to Forgive actions after a tough Match.'
					},
					{
						name: 'Mentor',
						description: '+1D to Long Term Projects that involves you teaching. You may give Improvement from Drills to another character.'
					},
					{
						name: 'Snap call',
						description: 'You get +1D to seeing through deception.'
					}
				],
				base: {
					libro_mod: '1',
					ability0_name: 'Tinker',
					ability0_description: 'When you work on a clock with serve or spike, or when you study a schematic, fill +1 segment.',
					friend_adjective: 'Colorful Friends',
					playbook_description: 'A thorn in the side of spikers. A spectacle to watch.',
					block: '1',
					dig: '1',
					roll_Spike: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-focus=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}',
					roll_Serve: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-judge=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{serve}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{serve}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{serve}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{serve}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{serve}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{serve}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{serve}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{serve}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{serve}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{serve}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{serve}-@{bonusdice}]],1}kl1]]d6]]}}',
					roll_Block: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-hustle=1}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{block}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{block}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{block}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{block}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{block}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{block}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{block}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{block}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{block}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{block}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{block}-@{bonusdice}]],1}kl1]]d6]]}}',
					xp_condition: 'Adress a challenge through quick thinking or grit?',
					special_spike: 'focus',
					special_serve: 'judge',
					special_block: 'hustle',
					img_spike: 'https://github.com/Jabberer/Constellations-On-The-Court/blob/master/Set.png?raw=true',
					burnout_description: 'I am the only thing between the ball and the floor. My only job on the team is keeping the other team from scoring. If I cannot do that I should not be on the team. Everyone has to do so many different things on the court. I cannot look them in the eyes if can\'t do this  one thing.',
					burnout_recovery: 'Recover from burnout by having someone prove to you that your a person first, a libro second. You must trust that no matter how you fail on the court your not any less of a person in the team\'s eyes.'
				},
				playbookitem: [
					{
						bold: '1',
						name: 'Fine Spikeing Rig',
					}, {
						bold: '1',
						name: 'Fine Ship Repair Tools',
						numboxes: '2',
					}, {
						name: 'Small Drone',
						numboxes: '0',
					}, {
						name: 'Vision-Enhancing Goggles',
					}, {
						name: 'Spare Parts',
					}, {
						name: 'Genius Pet',
						numboxes: '0',
					},
				]
			},
			middleblocker: {
				ability: [
					{
						name: 'Decoy',
						description: 'You gain an additional improvement trigger: You drew attention from someone to allow another person to succeed.'
					},
					{
						name: 'Guess Block',
						description: 'When Blocking someone you get +1D if you have learned what drives them.'
					},
					{
						name: 'Put me in!',
						description: 'When you are subbed into a set, your spikes gain potency as long as you have the Flow.'
					},
					{
						name: 'Reflexes',
						description: 'If there is ever a question who acts first it\'s you.'
					},
					{
						name: 'The Wall',
						description: 'Whenever you lead a group block you may spend Cohesion to increase the Effect and Position of everyone\'s roll. How do you get everyone on the same timing?'
					},
					{
						name: 'Proud to be apart of the team',
						description: 'Whenever you inspire someone with how proud you are to be apart of the team gain a point of Cohesion.'
					},
					{
						name: 'We are not losing!',
						description: 'Push yourself to do one of the following: Lift the spirits of a teammate or weaken the confidence of an opponent or increase the result when you Build Cohesion.'
					}
				],
				base: {
					ability0_name: 'Unstoppable',
					ability0_description: 'You can push yourself to do one of the following: \nperform a feat of physical force that verges on the superhuman — engage a small gang on equal footing in close combat.',
					declare: '1',
					friend_adjective: 'Deadly Friends',
					playbook_description: 'A first line of defense. A quick attacker.',
					block: '1',
					xp_condition: 'Address a challenge through obstruction or deft?',
					special_spike: 'spike',
					special_serve: 'serve',
					special_block: 'block',
					spike_form: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-spike= 0}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}',
					burnout_description: 'I am not good enough. It does not matter how hard I am trying, how much I dream, it is not getting me where I need to be. I am letting everyone down. I have to train harder, sleep less,give up anything else that is not volleyball.',
					burnout_recovery: 'To recover from burnout someone must teach you acceptance of your weakness and reveal where they would like to improve.'
				},
				playbookitem: [
					{
						bold: '1',
						name: 'Vera, a Fine Sniper Rifle',
						numboxes: '2',
					}, {
						bold: '1',
						name: 'Zmei, a Fine Flamethrower',
						numboxes: '2',
					}, {
						bold: '1',
						name: 'Sunder, a Fine Vibro-Blade',
					}, {
						name: 'Zarathustra, Detonator Launcher',
						numboxes: '2'
					}, {
						bold: '1',
						name: 'Krieger, a fine blaster pistol',
					}, {
						bold: '1',
						name: 'Fine Martial Art Style',
						numboxes: '0',
					}, {
						name: 'Mystic Ammunition',
						numboxes: '0',
					}
				]
			},
			opposite: {
				ability: [
					{
						name: 'Always there',
						description: 'Push yourself to be in the perfect spot to Block a Spike or to be there for someone when they need you most.'
					},
					{
						name: 'See past the Wall',
						description: 'When another person tries to Block you get +1D to your action to overcome them.'
					},
					{
						name: 'The Pipe',
						description: '+1D to Spikes when you are in the back row.'
					},
					{
						name: 'This is our shot',
						description: 'Spend a point of Cohesion and ask the table to Set to them and they get +1D to that Spike.'
					},
					{
						name: 'Finally a challenge',
						description: 'When playing defense vs a rival you have Potency.'
					},
					{
						name: 'Smell Weakness',
						description: 'Before the serve you may ask the Ref \"who is not ready for me?\"'
					},
					{
						name: 'Speak from the heart',
						description: 'Whenever you open up about a topic that is not easy for you to talk about the entire room listens.'
					}
				],
				base: {
					ability0_name: 'The Way',
					ability0_description: 'You can spend a gambit instead of paying any stress cost.',
					set: '1',
					friend_adjective: 'Weird Friends',
					playbook_description: 'A formiddable blocker. A mastrer od counter attacks.',
					block: '1',
					xp_condition: 'Address a challenge through perception or support?',
					special_spike: 'spike',
					spike_form: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-spike= 0}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}',
					special_serve: 'serve',
					special_block: 'block',
					burnout_description: 'I have worked long and hard to get good at this game. I know which plays are correct. The more my teammates argue with me the more time and energy they waste. If they just listen to me they would thank me later. I have to convince them that they are wrong or we are going to lose because of it.',
					burnout_recovery: 'Recover from burnout by having an argument with someone where the goal is understanding instead of winning. Compromise or understand the reasons they would think that way and why their position is of value.'
				},
				playbookitem: [
					{
						bold: '1',
						name: 'Fine Melee Weapon',
						numboxes: '2',
					}, {
						name: 'Offerings',
					}, {
						name: 'Trappings of Religion',
					}, {
						name: 'Outdated Religious Outfit',
						numboxes: '0',
					}, {
						name: 'Memento of Your Travels',
						numboxes: '0',
					}, {
						name: 'Precursor Artifact',
					},
				]
			},
			outside: {
				ability: [
					{
						name: 'Heart of Fire',
						description: 'When at max Stress all Desperate actions have Potency'
					},
					{
						name: 'Right to you',
						description: 'Set up actions using Receive increase Position and Effect'
					},
					{
						name: 'This is my Home',
						description: 'Whenever you save a ball that everyone thinks is unreachable gain a point of Cohesion.'
					},
					{
						name: 'Rebound Spike',
						description: 'Gain +1D to Realization when you Resist consequences from people blocking you.'
					},
					{
						name: 'Centered',
						description: 'Penalties from Mental Obstacles are one level less severe.'
					},
					{
						name: 'Roar of Encouragement',
						description: 'You get +1D to Declare when appreciating someone.'
					},
					{
						name: 'Expertise',
						description: 'Choose one of your action ratings. When you lead a group action using that action, you can suffer only 1 Stress at most, regardless of the number of failed rolls.'
					},
					{
						name: 'Student of the Game',
						description: 'Take a special ablitiy from another source. This may be taken any number of times.'
					}
				],
				base: {
					ability0_name: 'Ace Pilot',
					ability0_description: 'You have potency on all speed-related rolls. When you roll to resist the consequences of piloting, gain +1d.',
					friend_adjective: 'Fast Friends',
					recieve: '1',
					playbook_description: 'An adaptable player. An angel on the outskirts.',
					spike: '1',
					xp_condition: 'Address a challenge through ingeniuty or persistence?',
					special_spike: 'spike',
					special_serve: 'serve',
					special_block: 'block',
					spike_form: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-spike= 0}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}',
					burnout_description: 'All I see are walls. Why try to reach for the impossible. It\'s just a game, not worth hurting myself over. I look like a fool when I fail out there. When I spike, SHUTDOWN! When I block OUTSMARTED! I am doing my best and that all I can do.  I cannot get any better. I am at my limit.',
					burnout_recovery: 'Recover from burnout someone must show you that you can grow and try harder, and even more so that it is ok to fail and feel weak. They must show you a fear of failure within themselves.'

				},
				playbookitem: [
					{
						bold: '1',
						name: 'Fine Customized Spacesuit',
						numboxes: '2',
					}, {
						bold: '1',
						name: 'Fine Small Urbot',
						numboxes: '0',
					}, {
						bold: '1',
						name: 'Fine Mechanic\'s Kit',
					}, {
						name: 'Grappling Hook',
					}, {
						name: 'Guild License',
					}, {
						name: 'Victory Cigars',
						numboxes: '0',
					},
				]
			},
			setter: {
				ability: [
					{
						name: 'Who Deserves this?',
						description: 'Spend a point of Cohesion to set the ball to the person who best answers this question "why do you want to win" The player with the best answer gains +1D has the Scale of three players when spiking.'
					},
					{
						name: 'Demon Serve',
						description: 'Your Serves are fighting. If you have the Flow you have +1D to Realization rolls to Resist losing the Flow.'
					},
					{
						name: 'Everyone is different',
						description: 'Push yourself to have a player roll their best action rating for a different action.'
					},
					{
						name: 'Foresight',
						description: 'Two times in a Match you may Assist a player without paying Stress."How did you prepare for this?"'
					},
					{
						name: 'Grudge',
						description: 'When playing against a Rival, you get +1D to the Engagement roll.'
					},
					{
						name: 'Humble them',
						description: 'Whenever you dump and score a point choose a character, their confidence shatters.'
					},
					{
						name: 'I know you',
						description: 'When you attack from hiding or spring a trap, take +1d. When there\'s a question about who acts first, the answer is you (two characters with Shoot First act simultaneously).'
					}
				],
				base: {
					ability0_name: 'Serendipitous',
					ability0_description: 'Your crew starts with +1 gambit when the pool resets.',
					friend_adjective: '"Friends"',
					item_0_name: 'Fine Sidearm (or Pair)',
					playbook_description: 'A conductor of offense. A cunning mind.',
					setting_showitem_0: '1',
					set: '1',
					empathize: '1',
					xp_condition: 'Address a challenge through communication or forethought?',
					special_spike: 'spike',
					special_serve: 'serve',
					spike_form: '&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=rolls}} {{title-spike= 0}} {{position=?{Position|Risky|Controlled|Desperate}}} {{effect=?{Effect|Standard|Limited|Great|Extreme}}} {{roll1=[[[[{[[@{spike}+@{bonusdice}}]],1}kl1]]d6]]}} {{roll2=[[[[{[[@{spike}+@{bonusdice}-1}]],1}kl1]]d6]]}} {{roll3=[[[[{[[@{spike}+@{bonusdice}-2}]],1}kl1]]d6]]}} {{roll4=[[[[{[[@{spike}+@{bonusdice}-3}]],1}kl1]]d6]]}} {{roll5=[[[[{[[@{spike}+@{bonusdice}-4}]],1}kl1]]d6]]}} {{roll6=[[[[{[[@{spike}+@{bonusdice}-5}]],1}kl1]]d6]]}} {{roll7=[[[[{[[@{spike}+@{bonusdice}-6}]],1}kl1]]d6]]}} {{roll8=[[[[{[[@{spike}+@{bonusdice}-7}]],1}kl1]]d6]]}} {{roll9=[[[[{[[@{spike}+@{bonusdice}-8}]],1}kl1]]d6]]}} {{zerodice=[[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]], [[[[{[[1-@{spike}-@{bonusdice}]],1}kl1]]d6]]}}',
					special_block: 'block',
					burnout_description: 'I am the conductor. The team is my orchestra. My tosses are perfect, shame when they are wasted on this team. A good conductor does not let one musician disrupt the music. Those who can\'t keep up should not play.',
					burnout_recovery: 'To recover from burnout you must feel safe enough to reveal your inner core to someone. Someone must show how they also want to control things because the fear of failure.'

				},
				playbookitem: [
					{
						bold: '1',
						name: 'Fine Coat',
					}, {
						name: 'Loaded Dice, Trick Holocards',
						numboxes: '0',
					}, {
						name: 'Forged Documents',
						numboxes: '0',
					}, {
						name: 'Mystic Ammunition',
						numboxes: '0',
					}, {
						name: 'Personal Memento',
						numboxes: '0',
					},
				]
			}
		},
		factionsData = {
			factions1: [{
					name: 'Guild of Engineers',
					tier: 'V'
				},
				{
					name: 'Church of Stellar Flame',
					tier: 'IV'
				},
				{
					name: 'Counters Guild',
					tier: 'IV'
				},
				{
					name: 'Starless Veil',
					tier: 'IV'
				},
				{
					name: '51st Legion',
					tier: 'III'
				},
				{
					name: 'House Malklaith',
					tier: 'III'
				},
				{
					name: 'Isotropa Max Secure',
					tier: 'III'
				},
				{
					name: 'Starsmiths Guild',
					tier: 'III'
				},
				{
					name: 'Cult of the Seekers',
					tier: 'II'
				},
				{
					name: 'Hegemonic News Network',
					tier: 'II'
				},
				{
					name: 'Yaru (Makers Guild)',
					tier: 'II'
				},
				{
					name: 'Concordiat Knights',
					tier: 'I'
				}
			],
			factions2: [{
					name: 'Lost Legion',
					tier: 'IV'
				},
				{
					name: 'Scarlet Wolves',
					tier: 'IV'
				},
				{
					name: 'Vorex',
					tier: 'IV'
				},
				{
					name: 'Ashen Knives',
					tier: 'III'
				},
				{
					name: 'Borniko Syndicate',
					tier: 'III'
				},
				{
					name: 'Draxler\'s Raiders',
					tier: 'III'
				},
				{
					name: 'The Maelstrom',
					tier: 'III'
				},
				{
					name: 'Echo Wave Riders',
					tier: 'II'
				},
				{
					name: 'Janus Syndicate',
					tier: 'II'
				},
				{
					name: 'Turner Society',
					tier: 'II'
				},
				{
					name: 'Cobalt Syndicate',
					tier: 'I'
				},
				{
					name: 'Dyrinek Gang',
					tier: 'I'
				},
				{
					name: 'Wreckers',
					tier: 'I'
				}
			],
			factions3: [{
					name: 'Sah\'iir',
					tier: 'IV'
				},
				{
					name: 'Suneaters',
					tier: 'IV'
				},
				{
					name: 'The Agony',
					tier: 'III'
				},
				{
					name: 'Ashtari Cult',
					tier: 'III'
				},
				{
					name: 'Vignerons',
					tier: 'III'
				},
				{
					name: 'Ghosts',
					tier: 'II'
				},
				{
					name: 'Mendicants',
					tier: 'II'
				},
				{
					name: 'Nightspeakers',
					tier: 'II'
				},
				{
					name: 'Acolytes of Brashkadesh',
					tier: 'I'
				},
				{
					name: 'Conclave 01',
					tier: 'I'
				},
				{
					name: 'Vigilance',
					tier: 'I'
				}
			]
		},
		actionData = {
			realization: ['set', 'spike', 'serve', 'study'],
			tenacity: ['block', 'recieve', 'dig', 'skulk'],
			passion: ['declare', 'empathize', 'forgive', 'sway']
		},
		traumaData = ['cold', 'haunted', 'obsessed', 'paranoid', 'reckless', 'soft', 'unstable', 'vicious'];

	/* Utility functions */
	const fillRepeatingSectionFromData = (sectionName, dataList, autogen) => {
			getSectionIDs(`repeating_${sectionName}`, idList => {
				const existingRowAttributes = [
					...idList.map(id => `repeating_${sectionName}_${id}_name`),
					...idList.map(id => `repeating_${sectionName}_${id}_autogen`)
				];
				getAttrs(existingRowAttributes, v => {
					/* Delete auto-generated rows */
					if (autogen) {
						idList = idList.filter(id => {
							if (v[`repeating_${sectionName}_${id}_autogen`]) {
								removeRepeatingRow(`repeating_${sectionName}_${id}`);
								return false;
							}
							else return true;
						});
					}
					const existingRowNames = idList.map(id => v[`repeating_${sectionName}_${id}_name`]),
						createdIDs = [],
						setting = dataList.filter(o => !existingRowNames.includes(o.name))
						.map(o => {
							let rowID;
							while (!rowID) {
								let newID = generateRowID();
								if (!createdIDs.includes(newID)) {
									rowID = newID;
									createdIDs.push(rowID);
								}
							}
							const newAttrs = {};
							if (autogen) {
								newAttrs[`repeating_${sectionName}_${rowID}_autogen`] = '1';
							}
							return Object.keys(o).reduce((m, key) => {
								m[`repeating_${sectionName}_${rowID}_${key}`] = o[key];
								return m;
							}, newAttrs);
						})
						.reduce((m, o) => Object.assign(m, o), {});
					setAttrs(setting);
				});
			});
		},
		emptyFirstRowIfUnnamed = function (sectionName) {
			getSectionIDs(`repeating_${sectionName}`, function (idList) {
				getAttrs([`repeating_${sectionName}_${idList[0]}_name`], function (v) {
					if (!v[`repeating_${sectionName}_${idList[0]}_name`]) {
						removeRepeatingRow(`repeating_${sectionName}_${idList[0]}`);
					}
				});
			});
		},
		handleBoxesFill = (name, upToThree) => {
			on(`change:${name}1 change:${name}2 change:${name}3`, event => {
				if (event.sourceType !== 'player') return;
				getAttrs([event.sourceAttribute], v => {
					const rName = event.sourceAttribute.slice(0, -1),
						setting = {};
					if (String(v[event.sourceAttribute]) === '1') {
						switch (event.sourceAttribute.slice(-1)) {
						case '3':
							setting[`${rName}2`] = 1;
							/* falls through */
						case '2':
							setting[`${rName}1`] = 1;
						}
					}
					if (String(v[event.sourceAttribute]) === '0') {
						switch (event.sourceAttribute.slice(-1)) {
						case '1':
							setting[`${rName}2`] = 0;
							/* falls through */
						case '2':
							if (upToThree) setting[`${rName}3`] = 0;
						}
					}
					setAttrs(setting);
				});
			});
		};
	const shipAttributes = [...new Set([].concat(...Object.keys(shipData).map(x => Object.keys(shipData[x].base))))],
		playbookAttributes = [...new Set([].concat(...Object.keys(playbookData).map(x => Object.keys(playbookData[x].base))))],
		watchedAttributes = new Set(shipAttributes.concat(playbookAttributes)),
		autoExpandFields = [
			'repeating_ability:name',
			'repeating_ability:description',
			'repeating_crewability:name',
			'repeating_crewability:description',
			'repeating_friend:name',
			'repeating_contact:name',
			'repeating_playbookitem:name',
			'repeating_item:name',
			'repeating_upgrade:name',
			'ability0_name',
			'ability0_description',
			'item_0_name',
			'heritage',
			'background',
			'vice_purveyor',
			'gatherinfo2',
		],
		autogenSections = [
			'ability',
			'crewability',
			'friend',
			'contact',
			'playbookitem',
			'upgrade',
		];
	/* auto fill on entering playbook or ship type */
	on('change:crew_type change:playbook', event => {
		getAttrs(['playbook', 'crew_type', 'changed_attributes'], v => {
			const changedAttributes = (v.changed_attributes || '').split(','),
				sourceName = ((event.sourceAttribute === 'crew_type' ? v.crew_type : v.playbook) || "").toLowerCase(),
				fillBaseData = (data, defaultAttrNames) => {
					const finalSettings = defaultAttrNames.filter(name => !changedAttributes.includes(name))
						.reduce((m, name) => {
							m[name] = data[name] || '';
							return m;
						}, {});
					setAttrs(finalSettings);
				};
			if (sourceName) setAttrs({show_playbook_reminder: '0'});
			if (event.sourceAttribute === 'crew_type' && sourceName in shipData) {
				fillRepeatingSectionFromData('contact', shipData[sourceName].contact, true);
				fillRepeatingSectionFromData('crewability', shipData[sourceName].crewability, true);
				fillRepeatingSectionFromData('upgrade', shipData[sourceName].upgrade, true);
				fillBaseData(shipData[sourceName].base, shipAttributes);
			}
			if (event.sourceAttribute === 'playbook' && sourceName in playbookData) {
				fillRepeatingSectionFromData('ability', playbookData[sourceName].ability, true);
				fillRepeatingSectionFromData('friend', playbookData[sourceName].friend, true);
				fillRepeatingSectionFromData('playbookitem', playbookData[sourceName].playbookitem, true);
				fillBaseData(playbookData[sourceName].base, playbookAttributes);
			}
		});
	});
	/* watch for changes and update control attributes */
	watchedAttributes.forEach(name => {
		on(`change:${name}`, event => {
			if (event.sourceType === 'player') {
				getAttrs(['changed_attributes'], v => {
					const changedAttributes = [...new Set((v.changed_attributes || '').split(',')).add(name)]
						.filter(x => !!x).join(',');
					setAttrs({
						changed_attributes: changedAttributes
					});
				});
			}
		});
	});
	autogenSections.forEach(sectionName => {
		on(`change:repeating_${sectionName}`, event => {
			getAttrs([`repeating_${sectionName}_autogen`], v => {
				if (v[`repeating_${sectionName}_autogen`] && event.sourceType === 'player') {
					setAttrs({
						[`repeating_${sectionName}_autogen`]: ''
					});
				}
			});
		});
	});
	/* Trim whitespace in auto-expand fields */
	autoExpandFields.forEach(name => {
		on(`change:${name}`, event => {
			const attrName = name.replace(':', '_');
			getAttrs([attrName], v => {
				if (v[attrName].trim() !== v[attrName] && event.sourceType === 'player') {
					setAttrs({
						[attrName]: v[attrName].trim()
					});
				}
			});
		});
	});
	/* action calculations */
	const actionsFlat = [].concat(...Object.keys(actionData).map(x => actionData[x])),
		calculateResistance = name => {
			getAttrs(actionData[name], v => {
				const total = Object.keys(v).map(x => v[x])
					.reduce((s, c) => s + (String(c) === '0' ? 0 : 1), 0);
				setAttrs({[name]: total});
			});
		},
		calculateVice = () => {
			getAttrs(Object.keys(actionData), v => {
				setAttrs({vice: Math.min(...Object.keys(v).map(x => parseInt(v[x]) || 0))});
			});
		};
	Object.keys(actionData).forEach(attrName => {
		on(actionData[attrName].map(x => `change:${x}`).join(' '), () => calculateResistance(attrName));
		on(`change:${attrName}`, calculateVice);
	});
	actionsFlat.forEach(name => {
		on(`change:${name}`, event => {
			if (String(event.newValue) === '0' && String(event.previousValue) !== '1' && event.sourceType === 'player') {
				setAttrs({[name]: (parseInt(event.previousValue) - 1) || 0});
			}
		});
	});
	/* Trauma calculation */
	on(traumaData.map(x => `change:trauma_${x}`).join(' '), event => {
		getAttrs(traumaData.map(x => `trauma_${x}`), v => {
			if (event.sourceType === 'player') {
				const newTrauma = traumaData.reduce((m, name) => m + (parseInt(v[`trauma_${name}`]) || 0), 0);
				setAttrs({trauma: newTrauma});
			}
		});
	});
	/* Generation buttons */
	on('change:generate_factions', () => {
		Object.keys(factionsData).forEach(sectionName => {
			fillRepeatingSectionFromData(sectionName, factionsData[sectionName]);
		});
	});
	autogenSections.forEach(sectionName => {
		on(`change:generate_${sectionName}`, () => {
			getAttrs(['generate_source_character', 'generate_source_ship', 'sheet_type'], v => {
				const data = (v.sheet_type === 'character') ? playbookData : shipData,
					genSource = v[`generate_source_${v.sheet_type}`];
				if (genSource in data) {
					emptyFirstRowIfUnnamed(sectionName);
					fillRepeatingSectionFromData(sectionName, data[genSource][sectionName]);
				}
			});
		});
	});
	/* Left-filling checkboxes */
	['repeating_playbookitem:check', 'repeating_item:check', 'item_0_check', 'upgrade_5_check',
		'item_3_check', 'item_7_check', 'item_12_check', 'item_13_check'].forEach(name => handleBoxesFill(name));
	handleBoxesFill('repeating_upgrade:check', true);
	/* Resistance query */
	on('change:setting_consequence_query', () => {
		getAttrs(['setting_consequence_query'], v => {
			const consequenceQuery = (String(v.setting_consequence_query) === '1') ? `?{Consequence|a consequence}` : 'a consequence';
			setAttrs({'consequence_query': consequenceQuery});
		});
	});
	/* Opening and version upgrade */
	const upgradeSheet = version => {
		if (version === '0.5') {
			// Convert checks in repeating sections
			['ability', 'crewability', 'contact'].forEach(sName => {
				getSectionIDs(`repeating_${sName}`, idArray => {
					getAttrs(idArray.map(id => `repeating_${sName}_${id}_check`), v => {
						const setting = {};
						idArray.forEach(id => {
							if (v[`repeating_${sName}_${id}_check`] === 'on') setting[`repeating_${sName}_${id}_check`] = '1';
						});
						setAttrs(setting);
					});
				});
			});

			getSectionIDs('repeating_item', itemIDArray => {
				getSectionIDs('repeating_upgrade', upgradeIDArray => {
					const oldAttrs = [
						'sheet_type',
						...traumaData,
						...actionsFlat.map(x => x+'1'),
						...actionsFlat.map(x => x+'2'),
						...actionsFlat.map(x => x+'3'),
						'crew_quality1', 'crew_quality2', 'crew_quality3',
						'setting_extra_trauma', 'setting_extra_xp', 'ability0_check', 'setting_show_extra_sys2_mod_4',
						...[1,2,4].map(x => `sys1_mod_${x}_check`), 'sys1_mod_3check',
						...[1,2,3,4].map(x => `sys2_mod_${x}_check`),
						...[1,2].map(x => `sys3_mod_${x}_check`), 'sys3_mod_3check',
						...[1,2].map(x => `sys4_mod_${x}_check`),
						...[...Array(31).keys()].slice(1).map(x => `item_${x}_check`),
						...[1,2,3,13,20,24,29,30].map(x => `item_${x}_check_b`),
						...[...Array(31).keys()].slice(1).map(x => `item_${x}_desc`),
						...[...Array(31).keys()].slice(1).map(x => `upgrade_${x}_check`),
						...[4,5,6,7,16].map(x => `upgrade_${x}_check_b`),
						...[6,7].map(x => `upgrade_${x}_check_c`),
						...[...Array(31).keys()].slice(1).map(x => `upgrade_${x}_desc`),
						...itemIDArray.map(id => `repeating_item_${id}_check`),
						...itemIDArray.map(id => `repeating_item_${id}_check_b`),
						...itemIDArray.map(id => `repeating_item_${id}_desc`),
						...upgradeIDArray.map(id => `repeating_upgrade_${id}_check`),
						...upgradeIDArray.map(id => `repeating_upgrade_${id}_check_b`),
						...upgradeIDArray.map(id => `repeating_upgrade_${id}_desc`),
					];
					getAttrs(oldAttrs, v => {
						const setting = {};
						// convert sheet type from crew to ship
						if (v.sheet_type === 'crew') setting.sheet_type = 'ship';
						// convert trauma to trauma_${trauma} and switch 'on' to '1'
						traumaData.forEach(trauma => {
							if (v[trauma] === 'on') setting[`trauma_${trauma}`] = '1';
						});
						// convert action ratings and crew quality to one-attribute model
						[...actionsFlat, 'crew_quality'].forEach(name => {
							if (v[name+'3'] === '1') setting[name] = '3';
							else if (v[name+'2'] === '1') setting[name] = '2';
							else if (v[name+'1'] === '1') setting[name] = '1';
						});
						// Migrate change from 'on' to '1'
						[
							...[1,2,4].map(x => `sys1_mod_${x}_check`),
							...[1,2,3,4].map(x => `sys2_mod_${x}_check`),
							...[1,2].map(x => `sys3_mod_${x}_check`),
							...[1,2].map(x => `sys4_mod_${x}_check`),
							'setting_extra_trauma', 'setting_extra_xp', 'ability0_check', 'setting_show_extra_sys2_mod_4'
						].forEach(name => {
							if (v[name] === 'on') setting[name] = '1';
						});
						// Fix defective old attribute names
						if (v.sys1_mod_3check === 'on') setting.sys1_mod_3_check = '1';
						if (v.sys3_mod_3check === 'on') setting.sys3_mod_3_check = '1';
						// Manage old item3, new item_0
						if (v[`item_3_desc`]) {
							setting.item_0_name = v[`item_3_desc`];
							setting.showitem_0 = '1';
							if (v[`item_3_check`] === 'on') setting.item_0_check1 = '1';
							if (v[`item_3_check_b`] === 'on') setting.item_0_check2 = '1';
						}
						// put old data into repeating sections
						const playbookitemData = [1,2, ...[...Array(14).keys()].map(x => x+4)].reduce((m, num) => {
							if (v[`item_${num}_desc`]) {
								const data  = {
									boxes_chosen: '1',
									name: v[`item_${num}_desc`],
								};
								if ([1,2,13].includes(num)) {
									data.numboxes = '2';
									if (v[`item_${num}_check_b`] === 'on') data.check2 = '1';
								}
								if (v[`item_${num}_check`] === 'on') data.check1 = '1';
								if ([8,9,10,11,12].includes(num)) data.numboxes = '0';
								if ([1,2,4,5,6,7,8].includes(num)) data.bold = '1';
								m.push(data);
							}
							return m;
						}, []).concat(itemIDArray.map(id => {
							const data = {
								boxes_chosen: '1',
								name: v[`repeating_item_${id}_desc`],
								numboxes: '2',
							};
							if (v[`repeating_item_${id}_check`] === 'on') data.check1 = '1';
							if (v[`repeating_item_${id}_check_b`] === 'on') data.check2 = '1';
							return data;
						}));
						const upgradeData = [1,2,3,4,5,6,7].reduce((m, num) => {
							if (v[`upgrade_${num}_desc`]) {
								const data  = {
									boxes_chosen: '1',
									name: v[`upgrade_${num}_desc`],
								};
								if ([6,7].includes(num)) {
									data.numboxes = '3';
									if (v[`upgrade_${num}_check_b`] === 'on') data.check2 = '1';
									if (v[`upgrade_${num}_check_c`] === 'on') data.check3 = '1';
								}
								else if ([4,5].includes(num)) {
									data.numboxes = '2';
									if (v[`upgrade_${num}_check_b`] === 'on') data.check2 = '1';
								}
								if (v[`upgrade_${num}_check`] === 'on') data.check1 = '1';
								m.push(data);
							}
							return m;
						}, []).concat(upgradeIDArray.map(id => {
							const data = {
								boxes_chosen: '1',
								name: v[`repeating_upgrade_${id}_desc`],
								numboxes: '2',
							};
							if (v[`repeating_upgrade_${id}_check`] === 'on') data.check1 = '1';
							if (v[`repeating_upgrade_${id}_check_b`] === 'on') data.check2 = '1';
							return data;
						}));
						fillRepeatingSectionFromData('playbookitem', playbookitemData);
						fillRepeatingSectionFromData('upgrade', upgradeData);
						// remove old bogus repeating rows
						itemIDArray.forEach(id => removeRepeatingRow(`repeating_item_${id}`));
						upgradeIDArray.forEach(id => removeRepeatingRow(`repeating_upgrade_${id}`));
						// rename & convert items
						[...Array(13).keys()].map(x=> x + 18).forEach(num => {
							if (v[`item_${num}_desc`]) setting[`item_${num-17}_name`] = v[`item_${num}_desc`];
							if ([20,24,29,30].includes(num)) {
								if (v[`item_${num}_check`] === 'on') setting[`item_${num-17}_check1`] = '1';
								if (v[`item_${num}_check_b`] === 'on') setting[`item_${num-17}_check2`] = '1';
							}
							else if (v[`item_${num}_check`] === 'on') setting[`item_${num-17}_check`] = '1';
						});
						// rename & convert upgrades
						[8,10,12,14,16,18,20].forEach(num => {
							const target = (num / 2) - 3;
							if (v[`upgrade_${num}_desc`]) setting[`upgrade_${target}_name`] = v[`upgrade_${num}_desc`];
							if (num === 16) {
								if (v.upgrade_16_check === 'on') setting[`upgrade_5_check1`] = '1';
								if (v.upgrade_16_check_b === 'on') setting[`upgrade_5_check2`] = '1';
							}
							else if (v[`upgrade_${num}_check`] === 'on') setting[`upgrade_${target}_check`] = '1';
						});
						[9,11,13,15,17,19,21].forEach(num => {
							const target = (num + 7) / 2;
							if (v[`upgrade_${num}_desc`]) setting[`upgrade_${target}_name`] = v[`upgrade_${num}_desc`];
							if (v[`upgrade_${num}_check`] === 'on') setting[`upgrade_${target}_check`] = '1';
						});
						[22,24,26,28].forEach(num => {
							const target = (num / 2) + 4;
							if (v[`upgrade_${num}_desc`]) setting[`upgrade_${target}_name`] = v[`upgrade_${num}_desc`];
							if (v[`upgrade_${num}_check`] === 'on') setting[`upgrade_${target}_check`] = '1';
						});
						[23,25,27,29,30].forEach(num => {
							const target = (num === 30) ? '23' : ((num + 15)/ 2);
							if (v[`upgrade_${num}_desc`]) setting[`upgrade_${target}_name`] = v[`upgrade_${num}_desc`];
							if (v[`upgrade_${num}_check`] === 'on') setting[`upgrade_${target}_check`] = '1';
						});
						log(setting);
						setAttrs(setting);
					});
				});
			});
		}
	};
	on('sheet:opened', function () {
		getAttrs(['sheet_type', 'playbook', 'crew_type'], function (v) {
			if (v.playbook || v.crew_type) setAttrs({show_playbook_reminder: '0'});
			if (v.sheet_type === '0' || v.sheet_type === 0) {
				setAttrs({sheet_type: 'character'});
			}
		});
		getAttrs(['version'], function (v) {
			if (!v.version) {
				const setting = autogenSections.reduce(function (memo, sectionName) {
					memo[`repeating_${sectionName}_${generateRowID()}_autogen`] = '1';
					return memo;
				}, {});
				setAttrs(setting);
			}
			if (v.version === '.4' || v.version === '0.5') upgradeSheet('0.5');
			setAttrs({
				version: '1.0',
				character_sheet: 'Scum & Villainy 1.0',
			});
		});
	});
</script>
